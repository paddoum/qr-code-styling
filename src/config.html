
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>QR Code Styling Configuration</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      display: flex;
      gap: 20px;
    }
    
    .config-container {
      flex: 1;
      overflow-y: auto;
      max-height: 100vh;
    }
    
    .preview-container {
      flex: 1;
      position: sticky;
      top: 20px;
      text-align: center;
    }
    
    .form-section {
      margin-bottom: 20px;
      padding: 15px;
      border: 1px solid #ddd;
      border-radius: 5px;
    }
    
    .form-section h3 {
      margin-top: 0;
      border-bottom: 1px solid #eee;
      padding-bottom: 10px;
    }
    
    .form-group {
      margin-bottom: 10px;
    }
    
    label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
    }
    
    input, select, textarea {
      width: 100%;
      padding: 8px;
      box-sizing: border-box;
      border: 1px solid #ddd;
      border-radius: 4px;
    }
    
    input[type="color"] {
      height: 40px;
    }
    
    input[type="checkbox"] {
      width: auto;
      margin-right: 5px;
    }
    
    .checkbox-label {
      display: flex;
      align-items: center;
    }
    
    button {
      background-color: #4CAF50;
      border: none;
      color: white;
      padding: 10px 20px;
      text-align: center;
      text-decoration: none;
      display: inline-block;
      font-size: 16px;
      margin: 4px 2px;
      cursor: pointer;
      border-radius: 4px;
    }
    
    textarea {
      height: 100px;
      font-family: monospace;
    }
    
    .collapsible {
      cursor: pointer;
      position: relative;
    }
    
    .collapsible:after {
      content: '\002B';
      color: #777;
      font-weight: bold;
      float: right;
    }
    
    .active:after {
      content: "\2212";
    }
    
    .content {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.2s ease-out;
    }
    
    .show {
      max-height: 1000px;
    }
    
    #canvas {
      max-width: 100%;
      max-height: 500px;
      margin-bottom: 20px;
    }
    
    .controls {
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <div class="config-container">
    <h1>QR Code Configuration</h1>
    
    <div class="form-section">
      <h3>Basic Options</h3>
      <div class="form-group">
        <label for="data">QR Code Content:</label>
        <textarea id="data">https://qr-code-styling.com</textarea>
      </div>
      
      <div class="form-group">
        <label for="width">Width:</label>
        <input type="number" id="width" value="300" min="100" max="1000">
      </div>
      
      <div class="form-group">
        <label for="height">Height:</label>
        <input type="number" id="height" value="300" min="100" max="1000">
      </div>
      
      <div class="form-group">
        <label for="margin">Margin:</label>
        <input type="number" id="margin" value="10" min="0" max="100">
      </div>
      
      <div class="form-group">
        <label for="type">Render Type:</label>
        <select id="type">
          <option value="canvas">Canvas</option>
          <option value="svg" selected>SVG</option>
        </select>
      </div>
    </div>
    
    <div class="form-section">
      <h3 class="collapsible">QR Options</h3>
      <div class="content">
        <div class="form-group">
          <label for="typeNumber">Type Number (0-40):</label>
          <input type="number" id="typeNumber" value="0" min="0" max="40">
        </div>
        
        <div class="form-group">
          <label for="mode">Mode:</label>
          <select id="mode">
            <option value="Numeric">Numeric</option>
            <option value="Alphanumeric">Alphanumeric</option>
            <option value="Byte" selected>Byte</option>
            <option value="Kanji">Kanji</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="errorCorrectionLevel">Error Correction Level:</label>
          <select id="errorCorrectionLevel">
            <option value="L">L - Low (7%)</option>
            <option value="M">M - Medium (15%)</option>
            <option value="Q" selected>Q - Quality (25%)</option>
            <option value="H">H - High (30%)</option>
          </select>
        </div>
      </div>
    </div>
    
    <div class="form-section">
      <h3 class="collapsible">Dots Options</h3>
      <div class="content">
        <div class="form-group">
          <label for="dotsType">Dots Type:</label>
          <select id="dotsType">
            <option value="square">Square</option>
            <option value="dots" selected>Dots</option>
            <option value="rounded">Rounded</option>
            <option value="classy">Classy</option>
            <option value="classy-rounded">Classy Rounded</option>
            <option value="extra-rounded">Extra Rounded</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="dotsColor">Color:</label>
          <input type="color" id="dotsColor" value="#000000">
        </div>
        
        <div class="form-group">
          <h4 class="collapsible">Gradient</h4>
          <div class="content">
            <div class="form-group">
              <label class="checkbox-label">
                <input type="checkbox" id="dotsGradient">
                Use Gradient
              </label>
            </div>
            
            <div class="form-group">
              <label for="dotsGradientType">Gradient Type:</label>
              <select id="dotsGradientType">
                <option value="linear">Linear</option>
                <option value="radial">Radial</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="dotsGradientRotation">Rotation (deg):</label>
              <input type="number" id="dotsGradientRotation" value="0" min="0" max="360">
            </div>
            
            <div class="form-group">
              <label for="dotsGradientColor1">Color 1:</label>
              <input type="color" id="dotsGradientColor1" value="#000000">
            </div>
            
            <div class="form-group">
              <label for="dotsGradientColor2">Color 2:</label>
              <input type="color" id="dotsGradientColor2" value="#000000">
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="form-section">
      <h3 class="collapsible">Background Options</h3>
      <div class="content">
        <div class="form-group">
          <label for="backgroundColor">Color:</label>
          <input type="color" id="backgroundColor" value="#ffffff">
        </div>
        
        <div class="form-group">
          <h4 class="collapsible">Gradient</h4>
          <div class="content">
            <div class="form-group">
              <label class="checkbox-label">
                <input type="checkbox" id="backgroundGradient">
                Use Gradient
              </label>
            </div>
            
            <div class="form-group">
              <label for="backgroundGradientType">Gradient Type:</label>
              <select id="backgroundGradientType">
                <option value="linear">Linear</option>
                <option value="radial">Radial</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="backgroundGradientRotation">Rotation (deg):</label>
              <input type="number" id="backgroundGradientRotation" value="0" min="0" max="360">
            </div>
            
            <div class="form-group">
              <label for="backgroundGradientColor1">Color 1:</label>
              <input type="color" id="backgroundGradientColor1" value="#ffffff">
            </div>
            
            <div class="form-group">
              <label for="backgroundGradientColor2">Color 2:</label>
              <input type="color" id="backgroundGradientColor2" value="#ffffff">
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="form-section">
      <h3 class="collapsible">Corners Square Options</h3>
      <div class="content">
        <div class="form-group">
          <label for="cornersSquareType">Type:</label>
          <select id="cornersSquareType">
            <option value="square" selected>Square</option>
            <option value="dot">Dot</option>
            <option value="extra-rounded">Extra Rounded</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="cornersSquareColor">Color:</label>
          <input type="color" id="cornersSquareColor" value="#000000">
        </div>
        
        <div class="form-group">
          <h4 class="collapsible">Gradient</h4>
          <div class="content">
            <div class="form-group">
              <label class="checkbox-label">
                <input type="checkbox" id="cornersSquareGradient">
                Use Gradient
              </label>
            </div>
            
            <div class="form-group">
              <label for="cornersSquareGradientType">Gradient Type:</label>
              <select id="cornersSquareGradientType">
                <option value="linear">Linear</option>
                <option value="radial">Radial</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="cornersSquareGradientRotation">Rotation (deg):</label>
              <input type="number" id="cornersSquareGradientRotation" value="0" min="0" max="360">
            </div>
            
            <div class="form-group">
              <label for="cornersSquareGradientColor1">Color 1:</label>
              <input type="color" id="cornersSquareGradientColor1" value="#000000">
            </div>
            
            <div class="form-group">
              <label for="cornersSquareGradientColor2">Color 2:</label>
              <input type="color" id="cornersSquareGradientColor2" value="#000000">
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="form-section">
      <h3 class="collapsible">Corners Dot Options</h3>
      <div class="content">
        <div class="form-group">
          <label for="cornersDotType">Type:</label>
          <select id="cornersDotType">
            <option value="square" selected>Square</option>
            <option value="dot">Dot</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="cornersDotColor">Color:</label>
          <input type="color" id="cornersDotColor" value="#000000">
        </div>
        
        <div class="form-group">
          <h4 class="collapsible">Gradient</h4>
          <div class="content">
            <div class="form-group">
              <label class="checkbox-label">
                <input type="checkbox" id="cornersDotGradient">
                Use Gradient
              </label>
            </div>
            
            <div class="form-group">
              <label for="cornersDotGradientType">Gradient Type:</label>
              <select id="cornersDotGradientType">
                <option value="linear">Linear</option>
                <option value="radial">Radial</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="cornersDotGradientRotation">Rotation (deg):</label>
              <input type="number" id="cornersDotGradientRotation" value="0" min="0" max="360">
            </div>
            
            <div class="form-group">
              <label for="cornersDotGradientColor1">Color 1:</label>
              <input type="color" id="cornersDotGradientColor1" value="#000000">
            </div>
            
            <div class="form-group">
              <label for="cornersDotGradientColor2">Color 2:</label>
              <input type="color" id="cornersDotGradientColor2" value="#000000">
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="form-section">
      <h3 class="collapsible">Image Options</h3>
      <div class="content">
        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" id="useImage">
            Use Image
          </label>
        </div>
        
        <div class="form-group">
          <label for="imageUrl">Image URL:</label>
          <input type="text" id="imageUrl" placeholder="https://example.com/image.png">
        </div>
        
        <div class="form-group">
          <label for="imageSize">Image Size (0.0-1.0):</label>
          <input type="number" id="imageSize" value="0.4" min="0.1" max="1" step="0.1">
        </div>
        
        <div class="form-group">
          <label for="imageMargin">Image Margin:</label>
          <input type="number" id="imageMargin" value="0" min="0" max="50">
        </div>
        
        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" id="hideBackgroundDots" checked>
            Hide Background Dots
          </label>
        </div>
      </div>
    </div>
    
    <div class="form-section">
      <h3 class="collapsible">QR Border Plugin Options</h3>
      <div class="content">
        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" id="useBorder">
            Use Border
          </label>
        </div>
        
        <div class="form-group">
          <label for="borderRound">Border Roundness (0-1):</label>
          <input type="number" id="borderRound" value="0" min="0" max="1" step="0.1">
        </div>
        
        <div class="form-group">
          <label for="borderThickness">Border Thickness:</label>
          <input type="number" id="borderThickness" value="5" min="1" max="100">
        </div>
        
        <div class="form-group">
          <label for="borderColor">Border Color:</label>
          <input type="color" id="borderColor" value="#000000">
        </div>
        
        <div class="form-group">
          <h4 class="collapsible">Inner Border</h4>
          <div class="content">
            <div class="form-group">
              <label class="checkbox-label">
                <input type="checkbox" id="useInnerBorder">
                Use Inner Border
              </label>
            </div>
            
            <div class="form-group">
              <label for="innerBorderThickness">Thickness:</label>
              <input type="number" id="innerBorderThickness" value="5" min="1" max="100">
            </div>
            
            <div class="form-group">
              <label for="innerBorderColor">Color:</label>
              <input type="color" id="innerBorderColor" value="#000000">
            </div>
          </div>
        </div>
        
        <div class="form-group">
          <h4 class="collapsible">Outer Border</h4>
          <div class="content">
            <div class="form-group">
              <label class="checkbox-label">
                <input type="checkbox" id="useOuterBorder">
                Use Outer Border
              </label>
            </div>
            
            <div class="form-group">
              <label for="outerBorderThickness">Thickness:</label>
              <input type="number" id="outerBorderThickness" value="5" min="1" max="100">
            </div>
            
            <div class="form-group">
              <label for="outerBorderColor">Color:</label>
              <input type="color" id="outerBorderColor" value="#000000">
            </div>
          </div>
        </div>
        
        <div class="form-group">
          <h4 class="collapsible">Text Decoration</h4>
          <div class="content">
            <div class="form-group">
              <label class="checkbox-label">
                <input type="checkbox" id="useTextDecoration">
                Add Text Decoration
              </label>
            </div>
            
            <div class="form-group">
              <label for="textPosition">Position:</label>
              <select id="textPosition">
                <option value="top">Top</option>
                <option value="right">Right</option>
                <option value="bottom" selected>Bottom</option>
                <option value="left">Left</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="textContent">Text:</label>
              <input type="text" id="textContent" value="Scan me">
            </div>
            
            <div class="form-group">
              <label for="textStyle">CSS Style:</label>
              <input type="text" id="textStyle" value="font: 20px sans-serif; fill: #000000;">
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="form-section">
      <h3>Generated Config</h3>
      <div class="form-group">
        <textarea id="configOutput" readonly></textarea>
      </div>
    </div>
  </div>
  
  <div class="preview-container">
    <h2>QR Code Preview</h2>
    <div id="canvas"></div>
    <div class="controls">
      <button id="updateQr">Update QR Code</button>
      <button id="downloadQr">Download QR Code</button>
    </div>
  </div>
  
  <script type="text/javascript" src="https://unpkg.com/qr-code-styling@1.9.1/lib/qr-code-styling.js"></script>
  <script type="text/javascript">
    // Make all collapsible elements work
    const coll = document.getElementsByClassName("collapsible");
    for (let i = 0; i < coll.length; i++) {
      coll[i].addEventListener("click", function() {
        this.classList.toggle("active");
        const content = this.nextElementSibling;
        if (content.classList.contains("show")) {
          content.classList.remove("show");
        } else {
          content.classList.add("show");
        }
      });
    }
    
    // Initial QR code
    let qrCode = new QRCodeStyling({
      width: 300,
      height: 300,
      type: "svg",
      data: "https://qr-code-styling.com",
      margin: 10,
      qrOptions: {
        typeNumber: 0,
        mode: "Byte",
        errorCorrectionLevel: "Q"
      },
      dotsOptions: {
        type: "dots",
        color: "#000000"
      },
      backgroundOptions: {
        color: "#ffffff",
      },
      cornersSquareOptions: {
        type: "square",
        color: "#000000"
      },
      cornersDotOptions: {
        type: "square",
        color: "#000000"
      }
    });
    
    // Function to update QR code from form inputs
    function updateQRCode() {
      // Basic options
      const data = document.getElementById('data').value;
      const width = parseInt(document.getElementById('width').value);
      const height = parseInt(document.getElementById('height').value);
      const margin = parseInt(document.getElementById('margin').value);
      const type = document.getElementById('type').value;
      
      // QR options
      const typeNumber = parseInt(document.getElementById('typeNumber').value);
      const mode = document.getElementById('mode').value;
      const errorCorrectionLevel = document.getElementById('errorCorrectionLevel').value;
      
      // Dots options
      const dotsType = document.getElementById('dotsType').value;
      const dotsColor = document.getElementById('dotsColor').value;
      const dotsGradient = document.getElementById('dotsGradient').checked;
      
      // Background options
      const backgroundColor = document.getElementById('backgroundColor').value;
      const backgroundGradient = document.getElementById('backgroundGradient').checked;
      
      // Corners Square options
      const cornersSquareType = document.getElementById('cornersSquareType').value;
      const cornersSquareColor = document.getElementById('cornersSquareColor').value;
      const cornersSquareGradient = document.getElementById('cornersSquareGradient').checked;
      
      // Corners Dot options
      const cornersDotType = document.getElementById('cornersDotType').value;
      const cornersDotColor = document.getElementById('cornersDotColor').value;
      const cornersDotGradient = document.getElementById('cornersDotGradient').checked;
      
      // Image options
      const useImage = document.getElementById('useImage').checked;
      const imageUrl = document.getElementById('imageUrl').value;
      const imageSize = parseFloat(document.getElementById('imageSize').value);
      const imageMargin = parseInt(document.getElementById('imageMargin').value);
      const hideBackgroundDots = document.getElementById('hideBackgroundDots').checked;
      
      // Create the QR code options object
      const options = {
        width,
        height,
        type,
        data,
        margin,
        qrOptions: {
          typeNumber,
          mode,
          errorCorrectionLevel
        },
        dotsOptions: {
          type: dotsType,
          color: dotsColor
        },
        backgroundOptions: {
          color: backgroundColor
        },
        cornersSquareOptions: {
          type: cornersSquareType,
          color: cornersSquareColor
        },
        cornersDotOptions: {
          type: cornersDotType,
          color: cornersDotColor
        }
      };
      
      // Handle dots gradient
      if (dotsGradient) {
        const dotsGradientType = document.getElementById('dotsGradientType').value;
        const dotsGradientRotation = parseInt(document.getElementById('dotsGradientRotation').value) * Math.PI / 180;
        const dotsGradientColor1 = document.getElementById('dotsGradientColor1').value;
        const dotsGradientColor2 = document.getElementById('dotsGradientColor2').value;
        
        options.dotsOptions.gradient = {
          type: dotsGradientType,
          rotation: dotsGradientRotation,
          colorStops: [
            { offset: 0, color: dotsGradientColor1 },
            { offset: 1, color: dotsGradientColor2 }
          ]
        };
      }
      
      // Handle background gradient
      if (backgroundGradient) {
        const backgroundGradientType = document.getElementById('backgroundGradientType').value;
        const backgroundGradientRotation = parseInt(document.getElementById('backgroundGradientRotation').value) * Math.PI / 180;
        const backgroundGradientColor1 = document.getElementById('backgroundGradientColor1').value;
        const backgroundGradientColor2 = document.getElementById('backgroundGradientColor2').value;
        
        options.backgroundOptions.gradient = {
          type: backgroundGradientType,
          rotation: backgroundGradientRotation,
          colorStops: [
            { offset: 0, color: backgroundGradientColor1 },
            { offset: 1, color: backgroundGradientColor2 }
          ]
        };
      }
      
      // Handle corners square gradient
      if (cornersSquareGradient) {
        const cornersSquareGradientType = document.getElementById('cornersSquareGradientType').value;
        const cornersSquareGradientRotation = parseInt(document.getElementById('cornersSquareGradientRotation').value) * Math.PI / 180;
        const cornersSquareGradientColor1 = document.getElementById('cornersSquareGradientColor1').value;
        const cornersSquareGradientColor2 = document.getElementById('cornersSquareGradientColor2').value;
        
        options.cornersSquareOptions.gradient = {
          type: cornersSquareGradientType,
          rotation: cornersSquareGradientRotation,
          colorStops: [
            { offset: 0, color: cornersSquareGradientColor1 },
            { offset: 1, color: cornersSquareGradientColor2 }
          ]
        };
      }
      
      // Handle corners dot gradient
      if (cornersDotGradient) {
        const cornersDotGradientType = document.getElementById('cornersDotGradientType').value;
        const cornersDotGradientRotation = parseInt(document.getElementById('cornersDotGradientRotation').value) * Math.PI / 180;
        const cornersDotGradientColor1 = document.getElementById('cornersDotGradientColor1').value;
        const cornersDotGradientColor2 = document.getElementById('cornersDotGradientColor2').value;
        
        options.cornersDotOptions.gradient = {
          type: cornersDotGradientType,
          rotation: cornersDotGradientRotation,
          colorStops: [
            { offset: 0, color: cornersDotGradientColor1 },
            { offset: 1, color: cornersDotGradientColor2 }
          ]
        };
      }
      
      // Handle image
      if (useImage && imageUrl) {
        options.image = imageUrl;
        options.imageOptions = {
          hideBackgroundDots,
          imageSize,
          margin: imageMargin,
          crossOrigin: "anonymous"
        };
      }
      
      // Create border extension options if enabled
      const useBorder = document.getElementById('useBorder').checked;
      
      if (useBorder) {
        const borderRound = parseFloat(document.getElementById('borderRound').value);
        const borderThickness = parseInt(document.getElementById('borderThickness').value);
        const borderColor = document.getElementById('borderColor').value;
        
        const extensionOptions = {
          round: borderRound,
          thickness: borderThickness,
          color: borderColor,
          decorations: {},
        };
        
        // Inner border
        const useInnerBorder = document.getElementById('useInnerBorder').checked;
        if (useInnerBorder) {
          const innerBorderThickness = parseInt(document.getElementById('innerBorderThickness').value);
          const innerBorderColor = document.getElementById('innerBorderColor').value;
          
          extensionOptions.borderInner = {
            thickness: innerBorderThickness,
            color: innerBorderColor
          };
        }
        
        // Outer border
        const useOuterBorder = document.getElementById('useOuterBorder').checked;
        if (useOuterBorder) {
          const outerBorderThickness = parseInt(document.getElementById('outerBorderThickness').value);
          const outerBorderColor = document.getElementById('outerBorderColor').value;
          
          extensionOptions.borderOuter = {
            thickness: outerBorderThickness,
            color: outerBorderColor
          };
        }
        
        // Text decoration
        const useTextDecoration = document.getElementById('useTextDecoration').checked;
        if (useTextDecoration) {
          const textPosition = document.getElementById('textPosition').value;
          const textContent = document.getElementById('textContent').value;
          const textStyle = document.getElementById('textStyle').value;
          
          extensionOptions.decorations[textPosition] = {
            type: "text",
            value: textContent,
            style: textStyle
          };
        }
        
        // Update the QR code with plugin
        qrCode = new QRCodeStyling(options);
        qrCode.applyExtension(QRBorderPlugin(extensionOptions));
      } else {
        // Update the QR code without plugin
        qrCode = new QRCodeStyling(options);
      }
      
      // Display the QR code
      const canvas = document.getElementById("canvas");
      canvas.innerHTML = "";
      qrCode.append(canvas);
      
      // Update config output
      const config = JSON.stringify(options, null, 2);
      document.getElementById('configOutput').value = config;
    }
    
    // Initial rendering
    qrCode.append(document.getElementById("canvas"));
    
    // Event handlers
    document.getElementById('updateQr').addEventListener('click', updateQRCode);
    document.getElementById('downloadQr').addEventListener('click', function() {
      const type = document.getElementById('type').value;
      qrCode.download({
        extension: type,
        name: 'my-qr-code'
      });
    });
    
    // Populate config textarea on load
    const initialConfig = {
      width: 300,
      height: 300,
      type: "svg",
      data: "https://qr-code-styling.com",
      margin: 10,
      qrOptions: {
        typeNumber: 0,
        mode: "Byte",
        errorCorrectionLevel: "Q"
      },
      dotsOptions: {
        type: "dots",
        color: "#000000"
      },
      backgroundOptions: {
        color: "#ffffff",
      },
      cornersSquareOptions: {
        type: "square",
        color: "#000000"
      },
      cornersDotOptions: {
        type: "square",
        color: "#000000"
      }
    };
    
    document.getElementById('configOutput').value = JSON.stringify(initialConfig, null, 2);
  </script>
</body>
</html>
